<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- 각 페이지의 CSS가 작성될 위치 -->
<th:block layout:fragment="css">
	<style>
body {
	font-family: Arial, sans-serif;
	text-align: center;
}

h1 {
	margin-top: 30px;
}

label {
	display: block;
	margin-top: 20px;
	font-weight: bold;
}

input[type="text"] {
	padding: 5px;
	border: 1px solid #ccc;
	border-radius: 5px;
}

button {
	margin-top: 10px;
	padding: 8px 15px;
	background-color: #007bff;
	color: #fff;
	border: none;
	border-radius: 5px;
	cursor: pointer;
}

button:hover {
	background-color: #0056b3;
}

#result {
	margin-top: 20px;
	font-weight: bold;
}
</style>
</th:block>
<div layout:fragment="content">
	<div class="col-md-6"
		style="justify-content: center; align-items: center; margin: 0 auto;">
		<h2 class="h3 mb-3 text-black">아이디/비밀번호 찾기</h2>
		<div class="p-3 p-lg-5 border">
			<form role="form" action="/members/idFind" method="post"
				onsubmit="return findUser(users);">
				<!-- <div class="form-group row">
					<div class="col-md-12">
						<label for="findId" class="text-black">이름</label> <input
							type="text" class="form-control" placeholder="이름을 입력해주세요"
							id="findId" name="findId">
					</div>
				</div>
				<div class="form-group row">
					<div class="col-md-12">
						<label for="findEmail" class="text-black">이메일</label> <input
							type="email" class="form-control" placeholder="이메일을 입력해주세요"
							id="findEmail" name="findEmail">
					</div>
				</div>
				<div class="form-group">
					<div class="col-md-12">
						<button type="submit" class="btn btn-primary mb-3">아이디/비밀번호
							찾기</button>
					</div>
				</div> -->
				<input type="text" id="memberIdInput" placeholder="Enter Member ID">
				<button onclick="findMember()">Find Member</button>
				<div id="memberDetails"></div>
				<input type="hidden" th:name="${_csrf.parameterName}"
					th:value="${_csrf.token}">
			</form>
			<h2>아이디/비밀번호 찾기 결과</h2>
			<div th:if="${members}">
				<p>
					아이디: <span th:text="${members.email}"></span>
				</p>
				<p>
					비밀번호: <span th:text="${members.password}"></span>
				</p>
			</div>
			<div th:unless="${members}">
				<p>일치하는 사용자를 찾을 수 없습니다.</p>
			</div>
		</div>
	</div>

</div>
<th:block layout:fragment="script">
	<script th:inline="javascript">
	//회원가입이 실패 했을때
	var errorMessage = [[${errorMessage}]];
	
	if(errorMessage != null){
		alert(errorMessage);
	}
	 function findMember() {
		    const memberId = document.getElementById('memberIdInput').value;

		    // Make an API call to the server to fetch member details
		    fetch(`/api/members/${memberId}`) // Replace this URL with the actual API endpoint on your server
		      .then(response => response.json())
		      .then(data => {
		        // Assuming the API response returns the member details in JSON format
		        displayMemberDetails(data);
		      })
		      .catch(error => {
		        console.error('Error fetching member details:', error);
		      });
		  }

		  // Function to display the member details in the HTML
		  function displayMemberDetails(member) {
		    const memberDetailsDiv = document.getElementById('memberDetails');
		    if (member) {
		      memberDetailsDiv.innerHTML = `
		        <p>Member ID: ${member.id}</p>
		        <p>Name: ${member.name}</p>
		        <p>Email: ${member.email}</p>
		        <p>Phone Number: ${member.phoneNumber}</p>
		        <p>Address: ${member.address}</p>
		        <p>Role: ${member.role}</p>
		      `;
		    } else {
		      memberDetailsDiv.innerHTML = '<p>Member not found.</p>';
		    }
		  }
   </script>
</th:block>
</html>